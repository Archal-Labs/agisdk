{
  "total_checked": 263,
  "total_fixed": 18,
  "dry_run": false,
  "fixes": [
    {
      "task_id": "flyunified-gocalendar-staynb-1",
      "queries_checked": 4,
      "queries_fixed": 1,
      "fixes": [
        {
          "index": 1,
          "description": "Verify a StayNB with a kitchen was booked for the same dates in the destination city.",
          "original": "staynb.differences.bookings.added[?checkIn=='2024-03-13' && checkOut=='2024-03-16' && contains(amenities, 'kitchen')]",
          "fixed": "values(staynb.initialfinaldiff.added.booking.bookingDetails)[?checkIn=='2024-03-13' && checkOut=='2024-03-16' && contains(amenities, 'kitchen')]",
          "applied_fixes": [
            "staynb bookings filter - use initialfinaldiff"
          ]
        }
      ]
    },
    {
      "task_id": "flyunified-gocalendar-staynb-3",
      "queries_checked": 3,
      "queries_fixed": 1,
      "fixes": [
        {
          "index": 1,
          "description": "Verify a StayNB booking was made for Kenji Tanaka for two nights with required features.",
          "original": "length(staynb.differences.bookings.added) >= `1` && contains(staynb.differences.bookings.added[0].checkIn, '2023-11-18') && contains(staynb.differences.bookings.added[0].checkOut, '2023-11-20') && contains(staynb.differences.bookings.added[0].features, 'dedicated workspace') && contains(staynb.differences.bookings.added[0].features, 'self check-in')",
          "fixed": "length(values(staynb.initialfinaldiff.added.booking.bookingDetails || `{}`)) >= `1` && contains(values(staynb.initialfinaldiff.added.booking.bookingDetails)[0].checkIn, '2023-11-18') && contains(values(staynb.initialfinaldiff.added.booking.bookingDetails)[0].checkOut, '2023-11-20') && contains(values(staynb.initialfinaldiff.added.booking.bookingDetails)[0].features, 'dedicated workspace') && contains(values(staynb.initialfinaldiff.added.booking.bookingDetails)[0].features, 'self check-in')",
          "applied_fixes": [
            "staynb bookings length - use initialfinaldiff",
            "staynb bookings index - use initialfinaldiff"
          ]
        }
      ]
    },
    {
      "task_id": "flyunified-gomail-staynb-3",
      "queries_checked": 3,
      "queries_fixed": 1,
      "fixes": [
        {
          "index": 1,
          "description": "Verify that a StaynB booking for 3 nights, 1 person, in 'Mi\u00f0borg' with a kitchenette was made, with check-in on the flight arrival date (October 25th).",
          "original": "length(staynb.differences.bookings.added[?checkIn == '2023-10-25' && guests == `1` && nights == `3` && contains(area, 'Mi\u00f0borg') && contains(amenities, 'kitchenette')]) >= `1`",
          "fixed": "length(values(staynb.initialfinaldiff.added.booking.bookingDetails)[?checkIn == '2023-10-25' && guests == `1` && nights == `3` && contains(area, 'Mi\u00f0borg') && contains(amenities, 'kitchenette')]) >= `1`",
          "applied_fixes": [
            "staynb bookings filter - use initialfinaldiff"
          ]
        }
      ]
    },
    {
      "task_id": "flyunified-gomail-staynb-4",
      "queries_checked": 3,
      "queries_fixed": 1,
      "fixes": [
        {
          "index": 1,
          "description": "Verify that a StaynB booking is made for 5 nights, starting on July 10th (check-out July 15th).",
          "original": "length(staynb.differences.bookings.added) >= `1` && staynb.differences.bookings.added[0].checkIn == '2024-07-10' && staynb.differences.bookings.added[0].checkOut == '2024-07-15'",
          "fixed": "length(values(staynb.initialfinaldiff.added.booking.bookingDetails || `{}`)) >= `1` && values(staynb.initialfinaldiff.added.booking.bookingDetails)[0].checkIn == '2024-07-10' && values(staynb.initialfinaldiff.added.booking.bookingDetails)[0].checkOut == '2024-07-15'",
          "applied_fixes": [
            "staynb bookings length - use initialfinaldiff",
            "staynb bookings index - use initialfinaldiff"
          ]
        }
      ]
    },
    {
      "task_id": "flyunified-gomail-staynb-5",
      "queries_checked": 4,
      "queries_fixed": 1,
      "fixes": [
        {
          "index": 1,
          "description": "Verify that a StaynB was booked for 4 nights (May 3rd to May 7th) for an 'Entire place' in the 'Garden District' with a rating of 4.8 or higher.",
          "original": "staynb.differences.bookings.added[?checkIn=='2024-05-03' && checkOut=='2024-05-07' && contains(propertyDetails.type, 'Entire place') && contains(propertyDetails.location, 'Garden District') && propertyDetails.rating >= `4.8`] | length(@) >= `1`",
          "fixed": "values(staynb.initialfinaldiff.added.booking.bookingDetails)[?checkIn=='2024-05-03' && checkOut=='2024-05-07' && contains(propertyDetails.type, 'Entire place') && contains(propertyDetails.location, 'Garden District') && propertyDetails.rating >= `4.8`] | length(@) >= `1`",
          "applied_fixes": [
            "staynb bookings filter - use initialfinaldiff"
          ]
        }
      ]
    },
    {
      "task_id": "gocalendar-marrisuite-2",
      "queries_checked": 3,
      "queries_fixed": 2,
      "fixes": [
        {
          "index": 0,
          "description": "Verify that a booking for Marrisuite was successfully added.",
          "original": "length(marrisuite.differences.bookings.added) >= `1` && contains(marrisuite.differences.bookings.added[0].hotelName, 'Marrisuite')",
          "fixed": "length(marrisuite.bookingDetailsDiff.added) >= `1` && contains(marrisuite.bookingDetailsDiff.added[0].hotelName, 'Marrisuite')",
          "applied_fixes": [
            "marrisuite bookings length - use bookingDetailsDiff",
            "marrisuite bookings index - use bookingDetailsDiff"
          ]
        },
        {
          "index": 1,
          "description": "Verify the details of the Marrisuite booking, including check-in/out dates and room type.",
          "original": "marrisuite.differences.bookings.added[0].checkIn == '2024-07-22' && marrisuite.differences.bookings.added[0].checkOut == '2024-07-26' && contains(marrisuite.differences.bookings.added[0].roomType, 'Executive Suite')",
          "fixed": "marrisuite.bookingDetailsDiff.added[0].checkIn == '2024-07-22' && marrisuite.bookingDetailsDiff.added[0].checkOut == '2024-07-26' && contains(marrisuite.bookingDetailsDiff.added[0].roomType, 'Executive Suite')",
          "applied_fixes": [
            "marrisuite bookings index - use bookingDetailsDiff"
          ]
        }
      ]
    },
    {
      "task_id": "gocalendar-marrisuite-3",
      "queries_checked": 4,
      "queries_fixed": 2,
      "fixes": [
        {
          "index": 0,
          "description": "Verify a hotel booking was successfully made for the Marrisuite.",
          "original": "length(marrisuite.differences.bookings.added) >= `1`",
          "fixed": "length(marrisuite.bookingDetailsDiff.added) >= `1`",
          "applied_fixes": [
            "marrisuite bookings length - use bookingDetailsDiff"
          ]
        },
        {
          "index": 1,
          "description": "Verify the hotel booking check-in date is April 26th and check-out date is April 28th.",
          "original": "marrisuite.differences.bookings.added[0].checkIn == '2024-04-26' && marrisuite.differences.bookings.added[0].checkOut == '2024-04-28'",
          "fixed": "marrisuite.bookingDetailsDiff.added[0].checkIn == '2024-04-26' && marrisuite.bookingDetailsDiff.added[0].checkOut == '2024-04-28'",
          "applied_fixes": [
            "marrisuite bookings index - use bookingDetailsDiff"
          ]
        }
      ]
    },
    {
      "task_id": "gocalendar-marrisuite-4",
      "queries_checked": 4,
      "queries_fixed": 2,
      "fixes": [
        {
          "index": 0,
          "description": "Verify that a hotel booking was successfully created in the Marrisuite application.",
          "original": "length(marrisuite.differences.bookings.added) >= `1`",
          "fixed": "length(marrisuite.bookingDetailsDiff.added) >= `1`",
          "applied_fixes": [
            "marrisuite bookings length - use bookingDetailsDiff"
          ]
        },
        {
          "index": 1,
          "description": "Verify the details of the Marrisuite booking: hotel name is 'Marrisuite', room type is 'King Suite', and location is 'Miami, FL'.",
          "original": "marrisuite.differences.bookings.added[0] | (contains(hotelName, 'Marrisuite') && contains(roomType, 'King Suite') && contains(location, 'Miami, FL'))",
          "fixed": "marrisuite.bookingDetailsDiff.added[0] | (contains(hotelName, 'Marrisuite') && contains(roomType, 'King Suite') && contains(location, 'Miami, FL'))",
          "applied_fixes": [
            "marrisuite bookings index - use bookingDetailsDiff"
          ]
        }
      ]
    },
    {
      "task_id": "gocalendar-staynb-1",
      "queries_checked": 4,
      "queries_fixed": 1,
      "fixes": [
        {
          "index": 3,
          "description": "Verify that no booking was made on StaynB, as per instructions 'Don't book it yet'.",
          "original": "length(staynb.differences.bookings.added) == `0`",
          "fixed": "length(values(staynb.initialfinaldiff.added.booking.bookingDetails || `{}`)) == `0`",
          "applied_fixes": [
            "staynb bookings length - use initialfinaldiff"
          ]
        }
      ]
    },
    {
      "task_id": "gocalendar-staynb-2",
      "queries_checked": 4,
      "queries_fixed": 2,
      "fixes": [
        {
          "index": 0,
          "description": "Verify that a booking was added in StaynB for the team retreat.",
          "original": "length(staynb.differences.bookings.added) >= `1`",
          "fixed": "length(values(staynb.initialfinaldiff.added.booking.bookingDetails || `{}`)) >= `1`",
          "applied_fixes": [
            "staynb bookings length - use initialfinaldiff"
          ]
        },
        {
          "index": 1,
          "description": "Verify that the booked property in StaynB is located in Miami (checking name for keyword).",
          "original": "contains(staynb.differences.bookings.added[0].hotelName, 'Miami') || contains(staynb.differences.bookings.added[0].location, 'Miami')",
          "fixed": "contains(values(staynb.initialfinaldiff.added.booking.bookingDetails)[0].hotelName, 'Miami') || contains(values(staynb.initialfinaldiff.added.booking.bookingDetails)[0].location, 'Miami')",
          "applied_fixes": [
            "staynb bookings index - use initialfinaldiff"
          ]
        }
      ]
    },
    {
      "task_id": "gomail-marrisuite-1",
      "queries_checked": 3,
      "queries_fixed": 1,
      "fixes": [
        {
          "index": 0,
          "description": "Verify that a hotel booking was created for SpringHill Suites in downtown Denver from October 28th to 30th.",
          "original": "marrisuite.differences.bookings.added[?contains(hotelName, 'SpringHill Suites') && contains(location, 'Denver') && checkIn == '2023-10-28' && checkOut == '2023-10-30'] | length(@) >= `1`",
          "fixed": "marrisuite.bookingDetailsDiff.added[?contains(hotelName, 'SpringHill Suites') && contains(location, 'Denver') && checkIn == '2023-10-28' && checkOut == '2023-10-30'] | length(@) >= `1`",
          "applied_fixes": [
            "marrisuite bookings filter - use bookingDetailsDiff"
          ]
        }
      ]
    },
    {
      "task_id": "gomail-staynb-2",
      "queries_checked": 3,
      "queries_fixed": 2,
      "fixes": [
        {
          "index": 0,
          "description": "Verify a new StaynB wishlist named 'Canadian Rockies Trip' was created.",
          "original": "length(staynb.differences.wishlists.added[?name=='Canadian Rockies Trip']) >= `1`",
          "fixed": "length(values(staynb.initialfinaldiff.added.wishlist.wishlists || `{}`)[?name=='Canadian Rockies Trip']) >= `1`",
          "applied_fixes": [
            "staynb wishlists - use initialfinaldiff"
          ]
        },
        {
          "index": 1,
          "description": "Verify the 'Tidal Getaway' property was added to the 'Canadian Rockies Trip' wishlist in StaynB.",
          "original": "length(staynb.differences.wishlistItems.added[?propertyName=='Tidal Getaway' && wishlistName=='Canadian Rockies Trip']) >= `1`",
          "fixed": "length(values(staynb.initialfinaldiff.added.wishlist.items || `{}`)[?propertyName=='Tidal Getaway' && wishlistName=='Canadian Rockies Trip']) >= `1`",
          "applied_fixes": [
            "staynb wishlist items - use initialfinaldiff"
          ]
        }
      ]
    },
    {
      "task_id": "gomail-topwork-3",
      "queries_checked": 3,
      "queries_fixed": 1,
      "fixes": [
        {
          "index": 0,
          "description": "Verify Brian King's application status was updated to 'Decline Application' in TopWork.",
          "original": "length(topwork.differences.applications.updated[?candidate == 'Brian King' && status == 'Decline Application']) >= `1`",
          "fixed": "length(values(topwork.initialfinaldiff.updated.applications || `{}`)[?candidate == 'Brian King' && status == 'Decline Application']) >= `1`",
          "applied_fixes": [
            "topwork applications updated - use initialfinaldiff"
          ]
        }
      ]
    }
  ]
}