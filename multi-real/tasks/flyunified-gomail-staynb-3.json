{
  "id": "flyunified-gomail-staynb-3",
  "goal": "I need to book my solo trip to Iceland. First, book the cheapest non-stop, one-way flight from New York (JFK) to Reykjavik (KEF) for October 25th. Based on the flight's arrival date, book a StaynB for 3 nights for one person in the 'Mi\u00f0borg' area with a kitchenette. Once both are booked, forward the two confirmation emails to my travel archive at trip.archive@gomail.com with the subject 'Iceland Logistics Confirmed'.",
  "websites": [
    {
      "id": "flyunified",
      "name": "FlyUnified",
      "similarTo": "United Airlines",
      "previewImage": "/websitePreviews/flyunified_preview.jpg",
      "url": "https://real-flyunified.vercel.app"
    },
    {
      "id": "gomail",
      "name": "GoMail",
      "similarTo": "Gmail",
      "previewImage": "/websitePreviews/gomail_preview.jpg",
      "url": "https://real-gomail.vercel.app"
    },
    {
      "id": "staynb",
      "name": "StaynB",
      "similarTo": "Airbnb",
      "previewImage": "/websitePreviews/staynb_preview.jpg",
      "url": "https://real-staynb.vercel.app"
    }
  ],
  "difficulty": "hard",
  "challengeType": "action",
  "possible": true,
  "evals": [
    {
      "description": "Verify that a flight from JFK to KEF for October 25th was booked.",
      "type": "jmespath",
      "query": "length(flyunified.differences.bookedFlights.added[?destination == 'KEF' && origin == 'JFK' && departureDate == '2023-10-25']) >= `1`",
      "expected_value": "TODO: Add expected value after checking /finish JSON"
    },
    {
      "description": "Verify that a StaynB booking for 3 nights, 1 person, in 'Mi\u00f0borg' with a kitchenette was made, with check-in on the flight arrival date (October 25th).",
      "type": "jmespath",
      "query": "length(values(staynb.initialfinaldiff.added.booking.bookingDetails)[?checkIn == '2023-10-25' && guests == `1` && nights == `3` && contains(area, 'Mi\u00f0borg') && contains(amenities, 'kitchenette')]) >= `1`",
      "expected_value": "TODO: Add expected value after checking /finish JSON"
    },
    {
      "description": "Verify that two emails were sent to 'trip.archive@gomail.com' with the subject 'Iceland Logistics Confirmed', and that at least one email contains flight details and at least one contains hotel details.",
      "type": "jmespath",
      "query": "length(gomail.differences.emails.added[?sent == `true`]) >= `2` && all(gomail.differences.emails.added[?sent == `true`][*].recipient, &contains(@, 'trip.archive@gomail.com')) && all(gomail.differences.emails.added[?sent == `true`][*].subject, &contains(@, 'Iceland Logistics Confirmed')) && (length(gomail.differences.emails.added[?sent == `true` && contains(content, 'flight') || contains(content, 'JFK') || contains(content, 'KEF')]) >= `1`) && (length(gomail.differences.emails.added[?sent == `true` && contains(content, 'StaynB') || contains(content, 'hotel') || contains(content, 'Mi\u00f0borg')]) >= `1`)",
      "expected_value": "TODO: Add expected value after checking /finish JSON"
    }
  ],
  "points": 2,
  "config": {}
}