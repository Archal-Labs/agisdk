{
  "id": "gomail-topwork-3",
  "goal": "We've received a withdrawal notice from a candidate, Brian King, for the 'Python Data Analyst' role. His reason is that the salary is too low. Go to TopWork and update her application status to 'Decline Application'. Then, send an email to our HR lead, helena.v@mycorp.com, informing her of the withdrawal and mentioning the salary feedback so we can review the compensation for the role.",
  "websites": [
    {
      "id": "gomail",
      "name": "GoMail",
      "similarTo": "Gmail",
      "previewImage": "/websitePreviews/gomail_preview.jpg",
      "url": "https://real-gomail.vercel.app"
    },
    {
      "id": "topwork",
      "name": "TopWork",
      "similarTo": "Indeed",
      "previewImage": "/websitePreviews/topwork_preview.jpg",
      "url": "https://real-topwork.vercel.app"
    }
  ],
  "difficulty": "hard",
  "challengeType": "action",
  "possible": true,
  "evals": [
    {
      "description": "Verify Brian King's application status was updated to 'Decline Application' in TopWork.",
      "type": "jmespath",
      "query": "length(values(topwork.initialfinaldiff.updated.applications || `{}`)[?candidate == 'Brian King' && status == 'Decline Application']) >= `1`",
      "expected_value": false
    },
    {
      "description": "Verify an email was sent to helena.v@mycorp.com.",
      "type": "jmespath",
      "query": "length(gomail.differences.emails.added[?sent == `true` && recipient == 'helena.v@mycorp.com']) >= `1`",
      "expected_value": "TODO: Query error - In function length(), invalid type for value: None"
    },
    {
      "description": "Verify the sent email to Helena contains keywords 'withdrawal' and 'salary' in its content.",
      "type": "jmespath",
      "query": "length(gomail.differences.emails.added[?sent == `true` && recipient == 'helena.v@mycorp.com' && contains(content, 'withdrawal') && contains(content, 'salary')]) >= `1`",
      "expected_value": "TODO: Query error - In function length(), invalid type for value: None"
    }
  ],
  "points": 2,
  "config": {}
}